XHTML and & (Ampersand) encoding
url urlencode xhtml
My website is XHTML Transitional compliant except for one thing: the & (ampersand) in the URL are written as it is, instead of &amp;
That is, all the urls in my pages are usually like this:
<a href="http://www.foo.com/page.aspx?x=1&y=2">Foo</a>

But XHTML validator generates this error:

cannot generate system identifier for general entity "y"

... and it wants the url to be written like this:
<a href="http://www.foo.com/page.aspx?x=1&amp;y=2">Foo</a>

The problem is that IE and Firefox don't handle the URL correctly and ignore the y parameter. How can I make this link work and validate correctly?
It seems to me that it is impossible to write XHTML pages if the browsers don't work with strict encoded XHTML URLs.
Do you want to see in action? See the difference between these two links (copy and paste them as they are): 
http://stackoverflow.com/search?q=ff&sort=newest

and
http://stackoverflow.com/search?q=ff&amp;sort=newest



you could use &amp; instead of & in your url within your page.
That should allow it to be validated a strict xhtml...
<a href="http://www.foo.com/page.aspx?x=1&amp;y=2">Foo</a>

Note, if used by an ASP.NET Request.QueryString function, the query string doesn't use XML encoding, it uses URL encoding:
/mypath/mypage?b=%26stuff

So you need to provide a function translating '&' into %26
Note: in that case, Server.URLEncode(âneetu & geetuâ), which would produce neetu+%26+geetu, is not what you want, since you need to translate & into %26, not just '&'. You must add a replace() call applied to URLEncode result, in order to replace '%26amp;' by '%26'.

I have just tried this. What you attempted to do is correct.  In HTML if you are writing a link the & characters should be encoded as &amp;  You would only encode the & as %26 if you wanted a parameter value to contain an ampersand.  I just wrote a simple HTML page that contained a link: <a href="Default2.aspx?param1=63&amp;param2=hel">Click me</a>
and it worked fine: default2.aspx received the parameters intended and the source passed validation.
The encoding of & as &amp; is required in HTML, not in the link.  When the browser sees the &amp; in the HTML source for a link it will interpret it as an ampersand and the link target will be as intended.  If you paste a URL into your browser address bar it does not expect it to be HTML and does not try to interpret any HTML encoding that it may contain.  This is why your example links that you suggest we should copy/paste into a browser don't work and why we wouldn't expect them to work.
If you post a bit more of your actual code we might be able to see what you have done wrong, but you appear to be heading the right direction by using &amp; in your anchor tags.

It was my fault: the Hyperlink control already encoded &, so my url http://foo?x=1&amp;y=2 was encoded to http://foo?x=1&amp;amp;y=2
Normally the &amp inside the url is correctly handled by browsers, as you stated. Thanks

The problem is worse than you think - try it in Safari.  &amp; gets converted to &#38; and the hash ends the URL.  The correct answer is to not output XHTML - there's no reason that justifies spending more time on development and alienating mac users.

To be even more thorough: use &#38;, a numeric character reference.
Because &amp; is a character entity reference:

Character entity references are defined in the markup language
  definition. This means, for example, that for HTML only a specific
  range of characters (defined by the HTML specification) can be
  represented as character entity references (and that includes only a
  small subset of the Unicode range).

That's coming from the wise people at W3C (read this for more).
Of course, this is not a very big deal, but the suggestion of W3C is that the numeric one will be valid and useable everywhere and always, while the named one is 'fine' for HTML but nothing more.
