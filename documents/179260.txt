IE8 loses cookies when opening a new window after a redirect
cookies internet-explorer-8
I'm using Internet Explorer 8 beta 2.  

Client performs POST on http://alpha/foo
Server responds with redirect to http://beta/bar
Client performs GET on http://beta/bar
Server responds with redirect to http://beta/baz and sets cookie
Client performs GET on http://beta/baz including cookie
Server provides response
User selects "Open in new window" on a link in the page
Client performs GET on http://beta/link, without cookie!

If in step 7 the user just clicks the link, the cookie is passed correctly.  If there is no redirect, the cookie is passed correctly even if the user selects "Open in new window".
Is there a way to convince IE8 to pass the cookie in step 8?
(Edit: I believe this is a bug in IE8 beta 2, so I've raised it on the IE beta newsgroup.  Workaround suggestions welcome.)


I believe that IE8 uses a separate process for each window. If you're using session cookies, the new process will start with a fresh session and therefore won't be able to submit the session cookies received by the other process. Can you try using persistent cookies and see what happens?
From http://www.microsoft.com/windows/internet-explorer/beta/readiness/developers-existing.aspx#lcie

Loosely-coupled Internet Explorer
  (LCIE) is an architectural effort to
  improve the browser by separating its
  components and loosening their
  interdependence: most notably, it is
  an attempt to isolate the Internet
  Explorer frame and its tabs into
  separate processes. In Internet
  Explorer 8, this isolation will bring
  about improved performance and
  scalability, as well as more potent
  methods to recover from problems like
  disk or system failure.

