What is the best way to see what files are locked in Subversion?
svn administration
I finally got my group to switch from SourceSafe to Subversion.  Unfortunately, my manager still wants to use exclusive locks on every single file.  So I set the svn:needs-lock property on every file and created a pre-commit hook to make sure the property stays set.
We are running Subversion on a Linux server.  Most of us use Windows machines and a few use Macs.  We are using various SVN clients (TortoiseSVN, SmartSVN, Subclipse, etc.).  
What we now need is a good/easy method to see all the files that are currently locked in the entire repository (and who has them locked).  I have poked around a little in Tortoise and Subclipse, but haven't found what I am looking for.  Our projects have many subdirectories that are multiple levels deep, so it would be too time consuming to look at each individual directory.  
What I would like is a single report I can run that lists everything that is currently locked and who has it locked.  What is the best way to get this type of information?


What you're looking for is the svnadmin lslocks command.
I have this set up at work because we keep some Word documents in our Subversion repository (with svn:needs-lock). I have a cron job set up that every day, checks the list of locks and emails a report of all locks older than 7 days to the whole team. That way we can tell who has been slacking and sitting on a locked copy of a document for a long time.

This might not be the answer you're looking for, but you should try to convince the manager that locks are actually not the best development practice.  There's lots out there that's been written on this subject, so I won't repeat it all here.
When you go from a locking environment to one with no enforced checkout locks, at first you think it will lead to chaos, but it really doesn't.  SVN is good at merging changes when two people are working on the same file, and even if you end up with conflicts, it's not so bad to fix them.
Much better than waiting around for the guy who went to lunch with a critical file checked out, or worse yet, went on vacation.

To see what locks you and others hold, you can use TortoiseSVN â Check for Modifications.... Locally held lock tokens show up immediately. To check for locks held by others (and to see if any of your locks are broken or stolen) you need to click on Check Repository. 

You can discover locks from a local checkout using svn status --show-updates which will put an O  before all files which are locked on the server.
e.g.
$ svn status --show-updates
     O      279532   LockedFile
?                    UncommittedFile
M           279532   ModifiedFile

see the svnbook for more details
