Browser WYSIWYG best practices
asp.net javascript wysiwyg
I am using a rich text editor on a web page.  .NET has feature that prevent one from posting HTML tags, so I added a JavaScript snippet to change the angle brackets to and alias pair of characters before the post. The alias is replaced on the server with the necessary angle bracket and then stored in the database.  With XSS aside, what are common ways of fixing this problem. (i.e. Is there a better way?)
If you have comments on XSS(cross-site scripting), I'm sure that will help someone.


My first comment would be to avoid using JavaScript to change the angle brackets. Bypassing this is as simple as disabling JavaScript in the browser. Almost all server-side languages have some utility method that converts some HTML characters into their entity counterparts. For instance, PHP uses htmlentities(), and I am sure .NET has an equivalent utility method. In the least, you can do a regex replace for angle brackets, parenthesis and double quotes, and that will get you a long way toward a secure solution.

There's actually a way to turn that "feature" off. This will allow the user to post whichever characters they want, and there will be no need to convert characters to an alias using Javascript.  See this article for disabling request validation.  It means that you'll have to do your own validation, but from the sounds of your post, it seems that is what you are looking to do anyway.  You can also disable it per page  by following the instructions here.

I think the safest way to go is to NOT allow the user to create  tags with your WISYWIG. Maybe using something like a markdown editor like on this site or available here. would be another approach. 
Also keep the Page directive ValidateRequest=true which should stop  markup from being sent in the request, you'll of course need to handle this error when it comes up. People will always be able to inject  tags into the request either way using firefox extensions like Tamper data, but the ValidateRequest=true should at least stop ASP.NET from accepting them.
A straight forward post on XSS attacks was recently made by Jeff here. It also speaks to making your cookies HttpOnly, which is a semi-defense against cookie theft. Good luck!
