Ant build scripts, antcall, dependencies, etc
ant build-process
I have a build script and as part of that script it copies a jar file to a directory, for ease lets call it the utils jar.  the utils jar is built by another build script sitting in another directory.  What im trying to do have my build script run the utils build script so that I can ensure the utils jar is up to date.
So I know I need to import the utils build file.
<import file="../utils/build/build.xml" />

Which doesn't work because the import task, unlike almost every other ant taks, doesn't run from basedir, it runs from the pwd.  So to get around that I have this little ditty, which does successfully import the build file
  <property name="baseDirUpOne" location=".." />
  <import file="${baseDirUpOne}/utils/build/build.xml" />

So now that ive solved my import problem I need to call the task, well that should be easy right:
<antcall target="utils.package" />

note that in the above, utils is the project name of ../utils/build/build.xml
the problem I'm now running into is that ant call doesn't execute in ../utils/build so what I need, and cant find, is a runat property or something similar, essentially:
<antcall target="utils.package" runat="../utils/build" />

The reason I need this is that in my utils build file the step to select which code to copy to the jar is based on relative paths so as to avoid hardcoding paths in my ant file. Any ideas? 


I've got something similar set up: I have a main Ant build.xml which calls a separate build.xml that takes care of building my tests. This is how I do it:
<target name="build-tests">
    <subant target="build">
      <fileset dir="${test.home}" includes="build.xml"/>
    </subant>
</target>

The trick is to use subant instead of antcall. You don't have to import the other build file.

Try using the "ant" task instead of the "antcall" task, which runs the imported build directly instead of importing it into the current build file. It has a "dir" parameter:

the directory to use as a basedir
  for the new Ant project. Defaults to
  the current project's basedir, unless
  inheritall has been set to false, in
  which case it doesn't have a default
  value. This will override the basedir
  setting of the called project.

So you could do:
<ant antfile="${baseDirUpOne}/utils/build/build.xml" dir="../utils/build" />

or something like that.

You can pass params down to antcall using  nested in the antcall block.   So, you can pass the properties down that way (probably even basedir since properties are immutable).   
