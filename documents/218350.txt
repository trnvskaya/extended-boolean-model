Does Java Connection.close rollback?
java transactions database-connection
Does Java Connection.close rollback into a finally block?.
I know .Net SqlConnection.close does it.
With this I could make try/finally blocks without catch...
Example:
try {
    conn.setAutoCommit(false);
    ResultSet rs = executeQuery(conn, ...);
    ....
    executeNonQuery(conn, ...);
    ....

    conn.commit();
} finally {
   conn.close();
}



According to the javadoc, you should try to either commit or roll back before calling the close method.  The results otherwise are implementation-defined.

Oracle's JDBC driver commits on close() by default.  You should not rely on this behaviour if you intend to write multi-platform JDBC code.

In any database system I've worked with, there is no harm in doing a rollback right after the commit, so if you commit in the try block, and rollback in the finally, things get committed, whereas if an exception or early return causes the commit to be missed, the rollback will rollback the transaction.  So the safe thing to do is
try {
    conn.setAutoCommit(false);
    ResultSet rs = executeQuery(conn, ...);
    ....
    executeNonQuery(conn, ...);
    ....

    conn.commit();
} finally {
   conn.rollback();
   conn.close();
}


It is useless to rollback in finally block. After you commit, and commit is successful, why to roll back? So if i were you, i would rollback in catch block. 

The behavior is completely different between different databases. Examples:
Oracle
The transaction is committed when closing the connection with an open transaction (as @Mr. Shiny and New å®å® stated.
SQL Server

Calling the close method in the middle of a transaction causes the
  transaction to be rolled back.

close Method (SQLServerConnection)

For MySQL JDBC, the implementation rolls back the connection if closed without a call to commit or rollback methods.
